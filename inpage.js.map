{"version":3,"file":"inpage.js","mappings":"sCAgBA,IAAWA,EAZgEC,EAAQ,GAAaA,EAAQ,QAAgB,EACxHA,EAAQ,GAAgBC,OAAOC,OAAO,CAClCC,QAAS,UACTC,WAAY,aACZC,oBAAqB,oBACrBC,YAAa,aACbC,aAAc,eACdC,4BAA6B,2BAC7BC,aAAc,cACdC,iBAAkB,qBAGXX,EAKKC,EAAQ,KAAeA,EAAQ,GAAa,CAAC,IAJrC,QAAI,UACxBD,EAAwC,4BAAI,2BAC5CA,EAAyB,aAAI,cAC7BA,EAA6B,iBAAI,kBAgBbE,OAAOC,OAAO,CAClCS,SAAU,WACVC,OAAQ,SACRC,SAAU,Y,GCtCVC,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBE,IAAjBD,EACH,OAAOA,EAAajB,QAGrB,IAAImB,EAASL,EAAyBE,GAAY,CAGjDhB,QAAS,CAAC,GAOX,OAHAoB,EAAoBJ,GAAUG,EAAQA,EAAOnB,QAASe,GAG/CI,EAAOnB,OACf,C,2IC4DAqB,OAAOC,MAAQ,IA7Ef,MAKEC,cAAc,6DACZC,KAAKC,UAAY,EACjBD,KAAKE,iBAAmB,CAAC,EAGzBL,OAAOM,iBAAiB,WAAYC,IAClC,MAAM,KAAEC,GAASD,EACbC,GAAQL,KAAKE,iBAAiBG,EAAKC,QACrCN,KAAKE,iBAAiBG,EAAKC,OAAOD,EAAKE,OACxC,GAEJ,CAEDC,GAAGF,EAAOG,GACRT,KAAKE,iBAAiBI,GAASG,CAChC,CAEDC,UACE,OAAOV,KAAKW,QAAQC,EAAAA,GAAAA,QAAuB,CAAC,EAC7C,CAEDC,aACE,OAAOb,KAAKW,QAAQC,EAAAA,GAAAA,WAA0B,CAAC,EAChD,CAEDE,cACE,OAAOd,KAAKW,QAAQC,EAAAA,GAAAA,aAA4B,CAAC,EAClD,CAEDG,UACE,OAAOf,KAAKW,QAAQC,EAAAA,GAAAA,oBAAmC,CAAC,EACzD,CAEDI,UACE,OAAOhB,KAAKW,QAAQC,EAAAA,GAAAA,YAA2B,CAAC,EACjD,CAEDK,YAAYN,GACV,OAAOX,KAAKW,QAAQC,EAAAA,GAAAA,aAA4B,CAAED,WACnD,CAEDO,yBAAyBC,GACvB,OAAOnB,KAAKW,QAAQC,EAAAA,GAAAA,4BAA2C,CAAEO,eAClE,CAEDC,gBAAgBD,GACd,OAAOnB,KAAKW,QAAQC,EAAAA,GAAAA,iBAAgC,CAAEO,eACvD,CAEDR,QAAQU,EAAQC,GACdtB,KAAKC,WAAa,EAClB,MAAMsB,EAAKvB,KAAKC,UAChB,OAAO,IAAIuB,SAAQ,CAACC,EAASC,KAC3B7B,OAAO8B,YAAY,CAAEL,OAAMC,KAAIF,WAC/BxB,OAAOM,iBAAiB,WAAW,SAASyB,EAAQtB,GAClD,GAAIA,EAAMD,KAAKwB,iBAAmBR,GAC3Bf,EAAMD,KAAKkB,KAAOA,SACO7B,IAAxBY,EAAMD,KAAKyB,UACc,OAAxBxB,EAAMD,KAAKyB,UAAoB,CACtC,MAAM,SAAEA,GAAaxB,EAAMD,KAEK,MADhCL,KAAK+B,oBAAoB,UAAWH,GAChCE,GAAYA,EAASE,MACvBN,EAAM,UAACI,EAASE,aAAV,QAAmB,SAEzBP,EAAQK,EAEX,CACF,GAbD,GAeH,E","sources":["webpack://@petra/extension/./src/core/types/dappTypes.ts","webpack://@petra/extension/webpack/bootstrap","webpack://@petra/extension/./src/scripts/inpage.js"],"sourcesContent":["\"use strict\";\n// Copyright (c) Aptos\n// SPDX-License-Identifier: Apache-2.0\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PromptMessage = exports.permissionPrompt = exports.warningPrompt = exports.Permission = exports.MessageMethod = void 0;\nexports.MessageMethod = Object.freeze({\n    CONNECT: 'connect',\n    DISCONNECT: 'disconnect',\n    GET_ACCOUNT_ADDRESS: 'getAccountAddress',\n    GET_NETWORK: 'getNetwork',\n    IS_CONNECTED: 'is_connected',\n    SIGN_AND_SUBMIT_TRANSACTION: 'signAndSubmitTransaction',\n    SIGN_MESSAGE: 'signMessage',\n    SIGN_TRANSACTION: 'signTransaction',\n});\nvar Permission;\n(function (Permission) {\n    Permission[\"CONNECT\"] = \"connect\";\n    Permission[\"SIGN_AND_SUBMIT_TRANSACTION\"] = \"signAndSubmitTransaction\";\n    Permission[\"SIGN_MESSAGE\"] = \"signMessage\";\n    Permission[\"SIGN_TRANSACTION\"] = \"signTransaction\";\n})(Permission = exports.Permission || (exports.Permission = {}));\nfunction warningPrompt() {\n    return {\n        kind: 'warning',\n        warning: 'noAccounts',\n    };\n}\nexports.warningPrompt = warningPrompt;\nfunction permissionPrompt(permission) {\n    return {\n        kind: 'permission',\n        permission: permission,\n    };\n}\nexports.permissionPrompt = permissionPrompt;\nexports.PromptMessage = Object.freeze({\n    APPROVED: 'approved',\n    LOADED: 'loaded',\n    REJECTED: 'rejected',\n});\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// Copyright (c) Aptos\n// SPDX-License-Identifier: Apache-2.0\n\nimport { MessageMethod } from '../core/types/dappTypes';\n\nclass Web3 {\n  requestId;\n\n  eventListenerMap;\n\n  constructor() {\n    this.requestId = 0;\n    this.eventListenerMap = {};\n\n    // init the event listener helper\n    window.addEventListener('message', (request) => {\n      const { data } = request;\n      if (data && this.eventListenerMap[data.event]) {\n        this.eventListenerMap[data.event](data.params);\n      }\n    });\n  }\n\n  on(event, callback) {\n    this.eventListenerMap[event] = callback;\n  }\n\n  connect() {\n    return this.message(MessageMethod.CONNECT, {});\n  }\n\n  disconnect() {\n    return this.message(MessageMethod.DISCONNECT, {});\n  }\n\n  isConnected() {\n    return this.message(MessageMethod.IS_CONNECTED, {});\n  }\n\n  account() {\n    return this.message(MessageMethod.GET_ACCOUNT_ADDRESS, {});\n  }\n\n  network() {\n    return this.message(MessageMethod.GET_NETWORK, {});\n  }\n\n  signMessage(message) {\n    return this.message(MessageMethod.SIGN_MESSAGE, { message });\n  }\n\n  signAndSubmitTransaction(transaction) {\n    return this.message(MessageMethod.SIGN_AND_SUBMIT_TRANSACTION, { transaction });\n  }\n\n  signTransaction(transaction) {\n    return this.message(MessageMethod.SIGN_TRANSACTION, { transaction });\n  }\n\n  message(method, args) {\n    this.requestId += 1;\n    const id = this.requestId;\n    return new Promise((resolve, reject) => {\n      window.postMessage({ args, id, method });\n      window.addEventListener('message', function handler(event) {\n        if (event.data.responseMethod === method\n            && event.data.id === id\n            && (event.data.response !== undefined\n              || event.data.response !== null)) {\n          const { response } = event.data;\n          this.removeEventListener('message', handler);\n          if (response && response.error) {\n            reject(response.error ?? 'Error');\n          } else {\n            resolve(response);\n          }\n        }\n      });\n    });\n  }\n}\n\nwindow.aptos = new Web3();\n"],"names":["Permission","exports","Object","freeze","CONNECT","DISCONNECT","GET_ACCOUNT_ADDRESS","GET_NETWORK","IS_CONNECTED","SIGN_AND_SUBMIT_TRANSACTION","SIGN_MESSAGE","SIGN_TRANSACTION","APPROVED","LOADED","REJECTED","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","module","__webpack_modules__","window","aptos","constructor","this","requestId","eventListenerMap","addEventListener","request","data","event","params","on","callback","connect","message","MessageMethod","disconnect","isConnected","account","network","signMessage","signAndSubmitTransaction","transaction","signTransaction","method","args","id","Promise","resolve","reject","postMessage","handler","responseMethod","response","removeEventListener","error"],"sourceRoot":""}